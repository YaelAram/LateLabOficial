---
import type { Publicacion } from "@interfaces/types";
import TarjetaPublicacion from "./tarjeta-publicacion.astro";

/*
  Definimos las entradas o inputs del componente.

  Propiedades:
    - publicaciones: Contiene la lista con todas las publicaciones del laboratorio.
*/
interface Props {
  publicaciones: Publicacion[];
}

const { publicaciones } = Astro.props;
/*
  Clasificamos las publicacion en listas segun su año de publicacion posteriormente reorganizamos cada una de esas listas
  en orden descendente (de la mas reciente a la mas antigua).
*/
const publicacionesPorPeriodo = Object.entries(
  Object.groupBy(publicaciones, ({ periodo }) => periodo),
).toSorted((p1, p2) => p2[0].localeCompare(p1[0]));
const publicacionesPorAntiguedad = publicaciones.toSorted(
  (p1, p2) => p2.periodo - p1.periodo,
);
---

<!-- Creamos una seccion para contener todas las publicaciones del laboratorio  -->
<section class="mt-48 section-p-sides content-section" id="publicaciones">
  <h2>Publicaciones</h2>
  <!-- Creamos una subseccion para cada lista de publicaciones segun su año de publicacion -->
  {
    publicacionesPorAntiguedad.map((publicacion) => (
      <TarjetaPublicacion publicacion={publicacion} />
    ))
  }
</section>

<style>
  h2 {
    color: white;
  }

  section {
    background-color: #4f1c51;
    padding-top: 16px;
    padding-bottom: 16px;
  }

  @media (prefers-color-scheme: dark) {
    section {
      background-color: #452749;
    }
  }
</style>
